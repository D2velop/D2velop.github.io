<!DOCTYPE html><html lang="fr"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Les microservices - d2velop</title><meta name="description" content="Depuis quelques années, on entend beaucoup parler de microservices. Mais qui a-t-il réellement dernière cette dénomination ? Et surtout qu’est-ce que cela implique sur un projet ? Les microservices sont à la mode depuis quelques années. Ils ont été popularisés par des géants comme Netflix&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://blog.d2velop.fr/les-microservices/"><link rel="alternate" type="application/atom+xml" href="https://blog.d2velop.fr/feed.xml"><link rel="alternate" type="application/json" href="https://blog.d2velop.fr/feed.json"><meta property="og:title" content="Les microservices"><meta property="og:image" content="https://blog.d2velop.fr/media/posts/22/network-3849202_1280.webp"><meta property="og:image:width" content="1280"><meta property="og:image:height" content="426"><meta property="og:site_name" content="d2velop"><meta property="og:description" content="Depuis quelques années, on entend beaucoup parler de microservices. Mais qui a-t-il réellement dernière cette dénomination ? Et surtout qu’est-ce que cela implique sur un projet ? Les microservices sont à la mode depuis quelques années. Ils ont été popularisés par des géants comme Netflix&hellip;"><meta property="og:url" content="https://blog.d2velop.fr/les-microservices/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://blog.d2velop.fr/media/website/favicon-transparent-2.svg" type="image/x-icon"><link rel="stylesheet" href="https://blog.d2velop.fr/assets/css/style.css?v=ca81236a7243afb39f435382fd7fb44d"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.d2velop.fr/les-microservices/"},"headline":"Les microservices","datePublished":"2022-01-21T09:00","dateModified":"2023-05-08T21:22","image":{"@type":"ImageObject","url":"https://blog.d2velop.fr/media/posts/22/network-3849202_1280.webp","height":426,"width":1280},"description":"Depuis quelques années, on entend beaucoup parler de microservices. Mais qui a-t-il réellement dernière cette dénomination ? Et surtout qu’est-ce que cela implique sur un projet ? Les microservices sont à la mode depuis quelques années. Ils ont été popularisés par des géants comme Netflix&hellip;","author":{"@type":"Person","name":"Cédric Gérard","url":"https://blog.d2velop.fr/authors/cedric-gerard/"},"publisher":{"@type":"Organization","name":"Cédric Gérard"}}</script><noscript><style>img[loading] {
					opacity: 1;
				}</style></noscript></head><body><header class="topbar" id="js-header"><div class="topbar__inner"><a class="logo" href="https://blog.d2velop.fr/">d2velop</a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://blog.d2velop.fr/" target="_self">Accueil</a></li><li><a href="https://blog.d2velop.fr/tags/" target="_self">Catégories</a></li><li><a href="https://blog.d2velop.fr/authors/cedric-gerard/" target="_self">A propos</a></li></ul></nav></div></header><div class="content"><div class="infobar"><div class="infobar__update">Dernière mise à jour: <time datetime="2023-05-18T22:03">18 mai 2023</time></div></div><main class="main"><article class="post"><figure class="post__featured-image"><img src="https://blog.d2velop.fr/media/posts/22/network-3849202_1280.webp" srcset="https://blog.d2velop.fr/media/posts/22/responsive/network-3849202_1280-xs.webp 300w, https://blog.d2velop.fr/media/posts/22/responsive/network-3849202_1280-sm.webp 480w, https://blog.d2velop.fr/media/posts/22/responsive/network-3849202_1280-md.webp 768w, https://blog.d2velop.fr/media/posts/22/responsive/network-3849202_1280-lg.webp 1024w, https://blog.d2velop.fr/media/posts/22/responsive/network-3849202_1280-xl.webp 1360w, https://blog.d2velop.fr/media/posts/22/responsive/network-3849202_1280-2xl.webp 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="426" width="1280" alt="Schéma réseau informatique"><figcaption>geralt from Pixabay</figcaption></figure><header class="u-header post__header"><h1>Les microservices</h1><div class="u-header__meta u-small"><img src="https://blog.d2velop.fr/media/website/cgerard_Manga_style_in_the_style_of_Akira_Toriyama_ultra_detail_d3941437-f0fa-45cb-85c5-ff0465bc27c4-removebg-preview-2.png" loading="eager" class="u-header__avatar" alt="Cédric Gérard" height="500" width="500"><div><a href="https://blog.d2velop.fr/authors/cedric-gerard/" title="Cédric Gérard">Cédric Gérard</a> <time datetime="2022-01-21T09:00">21 janvier 2022 </time><a href="https://blog.d2velop.fr/tags/code/" class="u-tag u-tag--1">Code</a></div></div></header><div class="post__entry u-inner"><p>Depuis quelques années, on entend beaucoup parler de microservices. Mais qui a-t-il réellement dernière cette dénomination ? Et surtout qu’est-ce que cela implique sur un projet ?</p><h3 id="un-effet-de-mode-">Un effet de mode ?</h3><p>Les microservices sont à la mode depuis quelques années. Ils ont été popularisés par des géants comme Netflix ou Amazon, pour ne citer qu’eux, qui communiquent beaucoup sur leurs solutions techniques. Comme souvent chaque communication ou projet open source lancée par ce genre de géant à tendance à créer un effet de mode qui est souvent repris dans les startups du moment.</p><p>Cela n’a pas manqué pour les microservices qui se sont vu présenter comme la solution ultime à tous les soucis des applications actuelles en terme de scalabilité, de couplage et de maintenabilité.</p><h3 id="microservices-quésaco-">Microservices, quésaco ?</h3><p>Tout d’abord, que met-on derrière miroservice ? En fait, il ne s’agit pas d’une grande révolution par rapport à ce qu’on était capable de faire à l’époque. Il s’agit d’une variante des architectures orientées services (SOA – service-oriented architecture) avec comme particularité de découpé les services le plus finement possible. Avant cette approche, les solutions étaient déjà découpées afin de gérer la scalabilité de chaque partie spécifiquement. Le principe des microservices tient dans le terme « micro ». Ces derniers doivent être le plus petit possible et le plus simple possible. La conséquence est qu’on se retrouve vite avec un grand nombre de services à déployer et maintenir.</p><p>Dans les faits, pas de révolution, il s’agit d’une approche architecturale différente de ce qu’on faisait auparavant. Cette approche a été rendue possible avec deux évolutions techniques majeurs au niveau infrastructure et déploiement. La première, c’est le développement du cloud et des services d’hébergements. La deuxième est la conteneurisation des applications. Comme je vous l’ai expliqué au paragraphe précédent, avec les microservices on se retrouve à déployer beaucoup d’unité et on doit être capable de gérer les déploiements de chaque service indépendamment. Docker et les plateformes cloud comme AWS, Azur et Google Cloud ont ouvert la voie avec des outils permettant de répondre à ces besoins.</p><p>Quand on parle de beaucoup de services, il faut voir ce découpage comme le plus petit possible d’un point de vue technique et le plus proche possible du métier. En gros, on se retrouve avec au minimum un service par fonctionnalité. Bien souvent, les contraintes techniques ou les dépendances externes amènent à avoir plusieurs services pour une seule fonctionnalité. Au final, notre application peut compter plusieurs dizaines de services dans les cas simples et plusieurs centaines pour un gros projet. Cela demande d’avoir une plateforme de déploiement qui tient la route et un monitoring au top.</p><p>Il reste une dernière problématique qui est la communication entre ces services. Dans la plupart des cas, les services ne sont pas tous au même niveau. Vous allez, par exemple, avoir une API comme point d’entrée ou une application en front. Et les appels vont déclencher tout un enchaînement d’actions dans vos services pour aboutir au résultat attendu. Il y a une grosse partie d’échange entre ces derniers qui apporte un autre niveau de complexité. En effet, votre application ne doit pas planter si un service et hors d’usage. Vous devez être capable de tracer les échanges et reproduire les actions afin d’éviter les pertes de données et pouvoir comprendre les comportements en production. Pour cela, on utilise des “message brocker” (Kafka, RabbitMQ, etc.) pour gérer les échanges et la synchronisation des services. Cette partie est souvent celle qui est négligée et encore plus souvent sous-estimée, mais c’est pourtant la plus critique. Il faut bien comprendre que votre brocker va acheminer une importante quantité de messages. Avoir plusieurs millions de messages par jours n’est pas rare sur une application de taille normale.</p><h3 id="la-solution-ultime-">La solution ultime ?</h3><p>Pour être honnête, je n’ai jamais vu un système conçu sur la base de microservice bien conçu. J’ai à chaque fois, sois eu un surcoût monstrueux en maintenance à cause de mauvais choix techniques ou un découpage raté qui aboutit plutôt à des macroservices. Dans le dernier cas, on se retrouve avec la complexité des microservice et la lourdeur d’une application monolithique. C’est certainement ça qui a fait la mauvaise réputation des systèmes distribués à une époque pas si lointaine.</p><p>Au final est-ce que le coût des microservices en vaut la peine. Je dirai que dans 95 % des cas, non. Il faut comprendre que les microservice répondent principalement à des problématiques de scalabilité par une optimisation des déploiements. La capacité de scaler unitairement et dynamiquement chaque service est un besoin assez rare qu’on retrouve chez les géants du numérique. Les besoins de Netflix ou Facebook sont à des années-lumière de ce qu’on peut retrouver dans les projets communs même s’ils paraissent énormes.</p><p>Le problème des microservices et qu’ils nécessitent dès le début une infrastructure lourde, qu’ils ajoutent un surcoût non négligeable sur les aspects synchronisation entre services et qu’ils sollicites beaucoup plus la couche réseau.</p><p>Au-delà de la scalabilité on vente les microservices pour résoudre des problèmes de couplage dans une application. Je suis personnellement en désaccord avec cette affirmation. Dans les faits, les microservice s’intéressent au découpage d’une application et offrent des opportunités au niveau du déploiement d’une solution, ils ne changent pas grand-chose côté code. Vous pouvez avoir autant de couplage entre de services distribués que dans un monolithe. Et à l’inverse avoir un monolithe qui ne souffre d’aucun problème de couplage et qui d’ailleurs pourrait être découpé facilement par la suite si besoin. Il faut aussi avoir en tête que même si les microservice permettent une gestion plus fine des déploiements ils coûte aussi beaucoup plus cher niveau infrastructure.</p><h3 id="ma-vision-des-microservices">Ma vision des microservices</h3><p>Si d’aventure vous voulez quand même vous lancer voici les conseils que je pourrais donner suite à mes retours d’expériences:</p><ul><li><p>Découper votre application en services en fonction de vos contextes métier et le plus finement possible. Un service ne doit avoir qu’une seule responsabilité</p></li><li><p>Créer un service pour encapsuler chaque dépendance externe</p></li><li><p>Vos services doivent exposer des contrats clairs tant concernant les API que les messages qui passent par votre brocker. Il est nécessaire de définir ces contrats dès le début (c’est un moyen d’éviter les couplages implicites)</p></li><li><p>Penser que dans les microservices on privilégie la remplaçabilité à l’évolutivité. J’entends par là que, contrairement à un monolithe, on ne va pas forcément modifier une service existant pour changer son comportement, mais plutôt coder un nouveau service qui le remplacera à terme. Ainsi, il n’y a pas de risque de casser l’existant et le rollback est facile à automatiser via l’orchestrateur de services. Vous comprendrez que cette technique n’est faisable que si vos interfaces de services sont contractualisées et ce n’est rentable que si vos services sont « micro ». Je peux illustrer ce point avec un service de cartographie. Vous avez un service existant qui se base sur GoogleMap. Vous décidez pour de changer pour le service HereMap. Vous ne faites pas de modification dans le service existant. Vous allez implémenter un nouveau service qui utilise HereMap et qui va implémenter le même contrat que l’ancien. Ensuite, vous remplacerez l’ancien service au déploiement</p></li><li><p>Concernant vos messages, ils doivent être le plus précis possible. Par exemple, si vous avez un service qui gère vos clients. Lors d’une mise à jour de l’e-mail, il ne faut pas envoyer un message de mise à jour avec comme payload tout le client. Une bonne pratique serait d’envoyer un message avec uniquement l’information de ce qui a été changée</p></li><li><p>Conteneuriser vos services dès le début</p></li></ul><p>En conclusion, pour un nouveau projet, je n’opterai pas pour les microservices dès le début. Je commencerai par un monolithe en m’appuyant sur des pratiques comme les DDD, BDD ainsi que sur l’architecture hexagonale pour éviter le couplage et définir les contextes métiers de mon application. Avec cette approche, il est toujours possible de sortir un contexte dans son propre service plus tard pour répondre à un problème particulier de déploiement ou de scalabilité unitaire. Il est très rare d’atteindre les limites d’une application monolithique même sur un gros service. La plupart du temps, c’est l’état du code qui est la cause des limitations et non la typologie de la solution.</p></div><aside class="post__aside"><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.d2velop.fr%2Fles-microservices%2F" class="js-share facebook" title="Partager avec Facebook" rel="nofollow noopener noreferrer" aria-label="Partager avec Facebook"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#facebook"/></svg> </a><a href="https://twitter.com/share?url=https%3A%2F%2Fblog.d2velop.fr%2Fles-microservices%2F&amp;via=eriatand&amp;text=Les%20microservices" class="js-share twitter" title="Partager avec Twitter" rel="nofollow noopener noreferrer" aria-label="Partager avec Twitter"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="https://pinterest.com/pin/create/button/?url=https%3A%2F%2Fblog.d2velop.fr%2Fles-microservices%2F&amp;media=https%3A%2F%2Fblog.d2velop.fr%2Fmedia%2Fposts%2F22%2Fnetwork-3849202_1280.webp&amp;description=Les%20microservices" class="js-share pinterest" title="Partager avec Pinterest" rel="nofollow noopener noreferrer" aria-label="Partager avec Pinterest"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#pinterest"/></svg> </a><a href="https://mix.com/add?url=https%3A%2F%2Fblog.d2velop.fr%2Fles-microservices%2F" class="js-share mix" title="Partager avec Mix" rel="nofollow noopener noreferrer" aria-label="Partager avec Mix"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#mix"/></svg> </a><a href="https://wa.me/?text=Les%20microservices https%3A%2F%2Fblog.d2velop.fr%2Fles-microservices%2F" class="js-share whatsapp" rel="nofollow noopener noreferrer" title="Partager avec WhatsApp" aria-label="Partager avec WhatsApp"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#whatsapp"/></svg> </a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fblog.d2velop.fr%2Fles-microservices%2F" class="js-share linkedin" title="Partager avec LinkedIn" rel="nofollow noopener noreferrer" aria-label="Partager avec LinkedIn"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#linkedin"/></svg> </a><a href="https://buffer.com/add?text=Les%20microservices&amp;url=https%3A%2F%2Fblog.d2velop.fr%2Fles-microservices%2F" class="js-share buffer" title="Partager avec Buffer" rel="nofollow noopener noreferrer" aria-label="Partager avec Buffer"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#buffer"/></svg></a></div></aside><footer class="post__footer"><div class="post__bio box"><img class="u-author__avatar" src="https://blog.d2velop.fr/media/website/cgerard_Manga_style_in_the_style_of_Akira_Toriyama_ultra_detail_d3941437-f0fa-45cb-85c5-ff0465bc27c4-removebg-preview-2.png" loading="lazy" alt="Cédric Gérard" height="500" width="500"><div><h4 class="h6"><a href="https://blog.d2velop.fr/authors/cedric-gerard/" title="Cédric Gérard">Cédric Gérard</a></h4><p>Je suis dans l'informatique depuis tout jeune. D'abord intéressé par le hardward (montage, overcloking), j'ai mis du temps à trouver ma voie. Je suis tombé dans le développement en 2007, je n'ai jamais arrêté depuis..<br><br>Aujourd'hui, je suis développeur web avec une plus grande appétence pour le backend. J’accorde beaucoup d’attention à la valeur apportée aux utilisateurs finaux. On ne réalise pas d'application que pour se faire plaisir, après tout.<br><br>Je mets aussi un point d'honneur à livrer du code de qualité en m'appuyant sur les bonnes pratiques du développement logiciel et je défends les valeurs du software craftmanship.<br><br>L'agilité est également un élément essentiel pour un travail fiable et efficace. Je ne parle pas de méthode, mais de l'état d'esprit prôné par l'agilité.<br><br>J'aime partager mes compétences et j'ai une appétence particulière pour l'encadrement des développeurs juniors.<br><br>Je suis également en quête de sens, aucune technologie étant une fin en elle-même, j'ai besoin de savoir pourquoi je travaille et qu'elle est la valeur produite.</p></div></div><nav class="post__nav box"><div class="post__nav__prev"><a href="https://blog.d2velop.fr/la-confiance/" class="post__nav__link" rel="prev"><img src="https://blog.d2velop.fr/media/posts/21/responsive/cat-5690627_1280-xs.webp" loading="lazy" alt="" height="791" width="1280"><div class="u-small">Article Précédent<h5>La confiance</h5></div></a></div><div class="post__nav__next"><a href="https://blog.d2velop.fr/savoir-arreter/" class="post__nav__link" rel="next"><div class="u-small">Article Suivant<h5>Savoir arrêter</h5></div><img src="https://blog.d2velop.fr/media/posts/23/responsive/youtuber-2838945_1280-xs.jpg" loading="lazy" alt="" height="916" width="1280"></a></div></nav></footer></article></main><div class="sidebar"><section class="box featured"><h3 class="box__title">A la une</h3><ul class="featured__container"><li class="featured__item"><a href="https://blog.d2velop.fr/le-principe-de-responsabilite-unique/" class="featured__image-link"><img src="https://blog.d2velop.fr/media/posts/26/responsive/srp_title-xs.png" class="lazyload" loading="lazy" alt="" height="596" width="596"></a><div><a href="https://blog.d2velop.fr/le-principe-de-responsabilite-unique/" class="featured__title">Le principe de responsabilité unique</a> <time class="u-small" datetime="2023-05-18T22:59">18 mai 2023</time></div></li><li class="featured__item"><a href="https://blog.d2velop.fr/principes-solid-intro-2/" class="featured__image-link"><img src="https://blog.d2velop.fr/media/posts/24/responsive/solid-xs.png" class="lazyload" loading="lazy" alt="" height="1218" width="1218"></a><div><a href="https://blog.d2velop.fr/principes-solid-intro-2/" class="featured__title">Principes SOLID - Intro</a> <time class="u-small" datetime="2023-05-12T09:00">12 mai 2023</time></div></li><li class="featured__item"><a href="https://blog.d2velop.fr/im-back/" class="featured__image-link"><img src="https://blog.d2velop.fr/media/posts/25/responsive/cgerard_A_terminator_like_men_Schwarzenegger_with_sunglasses_ge_76cbd3a8-a12c-4b6a-a704-9c538b99523f-xs.png" class="lazyload" loading="lazy" alt="" height="1024" width="1024"></a><div><a href="https://blog.d2velop.fr/im-back/" class="featured__title">I&#x27;m back</a> <time class="u-small" datetime="2023-05-10T23:00">10 mai 2023</time></div></li></ul></section><section class="box"><h3 class="box__title">Suivez nous</h3><div class="follow"><a href="https://twitter.com/eriatand" class="twitter" aria-label="Twitter"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#twitter"/></svg> Twitter </a><a href="https://www.linkedin.com/company/d2velop" class="linkedin" aria-label="LinkedIn"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#linkedin"/></svg> LinkedIn</a></div></section><section class="box authors"><h3 class="box__title">Auteurs</h3><ul class="authors__cotainer"><li class="authors__item"><a href="https://blog.d2velop.fr/authors/cedric-gerard/" class="authors__image-link"><img src="https://blog.d2velop.fr/media/website/cgerard_Manga_style_in_the_style_of_Akira_Toriyama_ultra_detail_d3941437-f0fa-45cb-85c5-ff0465bc27c4-removebg-preview-2.png" loading="lazy" alt="Cédric Gérard" height="500" width="500"></a><div><a href="https://blog.d2velop.fr/authors/cedric-gerard/" class="authors__title">Cédric Gérard</a> <span class="u-small">Article: 24</span></div></li></ul></section><section class="box"><h3 class="box__title">Tags</h3><ul class="tags"><li><a href="https://blog.d2velop.fr/tags/chroniques/">Chroniques</a> <span class="u-small">(12)</span></li><li><a href="https://blog.d2velop.fr/tags/code/">Code</a> <span class="u-small">(4)</span></li><li><a href="https://blog.d2velop.fr/tags/developpeur-mindset/">Développeur Mindset</a> <span class="u-small">(4)</span></li><li><a href="https://blog.d2velop.fr/tags/no-code/">No code</a> <span class="u-small">(1)</span></li><li><a href="https://blog.d2velop.fr/tags/recrutement/">Recrutement</a> <span class="u-small">(1)</span></li></ul></section></div><footer class="footer"><a class="footer__logo" href="https://blog.d2velop.fr/">d2velop</a><nav><ul class="footer__nav"></ul></nav><div class="footer__follow"><a href="https://twitter.com/eriatand" aria-label="Twitter"><svg><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="https://www.linkedin.com/company/d2velop" aria-label="LinkedIn"><svg><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#linkedin"/></svg></a></div><div class="footer__copyright"><p>Powered by Publii</p></div></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://blog.d2velop.fr/assets/js/scripts.min.js?v=ef33954c8f912e6c18ee116825aadc90"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>