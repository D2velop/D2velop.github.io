<!DOCTYPE html><html lang="fr"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Le principe d&#x27;injection de dépendance - d2velop</title><meta name="description" content="Le principe d’injection de dépendance (Dependency Injection ou DI) est le dernier principe SOLID. Il vise à réduire les dépendances directes entre les classes en permettant l’injection des dépendances nécessaires depuis l’extérieur. Selon Bob Martin, le principe d’injection stipule : Les modules de haut niveau&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://blog.d2velop.fr/le-principe-dinjection-de-dependance/"><link rel="alternate" type="application/atom+xml" href="https://blog.d2velop.fr/feed.xml"><link rel="alternate" type="application/json" href="https://blog.d2velop.fr/feed.json"><meta property="og:title" content="Le principe d'injection de dépendance"><meta property="og:image" content="https://blog.d2velop.fr/media/posts/30/di.png"><meta property="og:image:width" content="942"><meta property="og:image:height" content="634"><meta property="og:site_name" content="d2velop"><meta property="og:description" content="Le principe d’injection de dépendance (Dependency Injection ou DI) est le dernier principe SOLID. Il vise à réduire les dépendances directes entre les classes en permettant l’injection des dépendances nécessaires depuis l’extérieur. Selon Bob Martin, le principe d’injection stipule : Les modules de haut niveau&hellip;"><meta property="og:url" content="https://blog.d2velop.fr/le-principe-dinjection-de-dependance/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://blog.d2velop.fr/media/website/favicon-transparent-2.svg" type="image/x-icon"><link rel="stylesheet" href="https://blog.d2velop.fr/assets/css/style.css?v=01b0fc930948c37c40d7de564b9b01bc"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.d2velop.fr/le-principe-dinjection-de-dependance/"},"headline":"Le principe d'injection de dépendance","datePublished":"2023-06-26T09:00","dateModified":"2023-06-25T22:18","image":{"@type":"ImageObject","url":"https://blog.d2velop.fr/media/posts/30/di.png","height":634,"width":942},"description":"Le principe d’injection de dépendance (Dependency Injection ou DI) est le dernier principe SOLID. Il vise à réduire les dépendances directes entre les classes en permettant l’injection des dépendances nécessaires depuis l’extérieur. Selon Bob Martin, le principe d’injection stipule : Les modules de haut niveau&hellip;","author":{"@type":"Person","name":"Cédric Gérard","url":"https://blog.d2velop.fr/authors/cedric-gerard/"},"publisher":{"@type":"Organization","name":"Cédric Gérard"}}</script><noscript><style>img[loading] {
					opacity: 1;
				}</style></noscript><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script></head><body><header class="topbar" id="js-header"><div class="topbar__inner"><a class="logo" href="https://blog.d2velop.fr/">d2velop</a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://blog.d2velop.fr/" target="_self">Accueil</a></li><li><a href="https://blog.d2velop.fr/tags/" target="_self">Catégories</a></li><li><a href="https://blog.d2velop.fr/authors/cedric-gerard/" target="_self">A propos</a></li></ul></nav></div></header><div class="content"><div class="infobar"><div class="infobar__update">Dernière mise à jour: <time datetime="2023-06-25T22:18">25 juin 2023</time></div></div><main class="main"><article class="post"><figure class="post__featured-image"><img src="https://blog.d2velop.fr/media/posts/30/di.png" srcset="https://blog.d2velop.fr/media/posts/30/responsive/di-xs.png 300w, https://blog.d2velop.fr/media/posts/30/responsive/di-sm.png 480w, https://blog.d2velop.fr/media/posts/30/responsive/di-md.png 768w, https://blog.d2velop.fr/media/posts/30/responsive/di-lg.png 1024w, https://blog.d2velop.fr/media/posts/30/responsive/di-xl.png 1360w, https://blog.d2velop.fr/media/posts/30/responsive/di-2xl.png 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="634" width="942" alt=""></figure><header class="u-header post__header"><h1>Le principe d&#x27;injection de dépendance</h1><div class="u-header__meta u-small"><img src="https://blog.d2velop.fr/media/website/cgerard_Manga_style_in_the_style_of_Akira_Toriyama_ultra_detail_d3941437-f0fa-45cb-85c5-ff0465bc27c4-removebg-preview-2.png" loading="eager" class="u-header__avatar" alt="Cédric Gérard" height="500" width="500"><div><a href="https://blog.d2velop.fr/authors/cedric-gerard/" title="Cédric Gérard">Cédric Gérard</a> <time datetime="2023-06-26T09:00">26 juin 2023 </time><a href="https://blog.d2velop.fr/tags/code/" class="u-tag u-tag--1">Code</a></div></div></header><div class="post__entry u-inner"><p>Le principe d’injection de dépendance (Dependency Injection ou DI) est le dernier principe SOLID. Il vise à réduire les dépendances directes entre les classes en permettant l’injection des dépendances nécessaires depuis l’extérieur.</p><p>Selon Bob Martin, le principe d’injection stipule :</p><p><em>Les modules de haut niveau ne doivent pas dépendre de modules de bas niveau. Les deux devraient dépendre des abstractions.</em></p><p><em>Les abstractions ne doivent pas dépendre des détails. Les détails devraient dépendre des abstractions.</em></p><p>Selon le principe DI, les dépendances d’une classe ne devraient pas être créées ou résolues à l’intérieur de cette classe elle-même. Au lieu de cela, les dépendances doivent être fournies de manière externe, généralement par le biais de constructeurs, de méthodes ou de propriétés, ce qui permet une plus grande flexibilité et facilite les tests et la réutilisabilité du code.</p><p>Grâce à cette méthode, les dépendances ne sont plus exprimées statiquement (hard coded ou instancié dans la classe) mais dynamiquement à l’exécution. Cela nous permet de changer la valeur d’une dépendance pendant que le programme s’exécute. Par exemple, on peut injecter un algorithme de recherche différent en fonction du choix de l’utilisateur. On peut aussi injecter une implémentation particulière en fonction du contexte d’exécution, par exemple un “fake” d’un service externe en local ou en environnement de test.</p><p>Prenons on exemple de code pour illustrer ce principe.</p><div class="code-toolbar"><pre>
        <code class="language-typescript">
class UserService {
  private database: Database;
<br>
  constructor() {
    this.database = new Database();
  }
<br>
  getUsers(): User[] {
    return this.database.query('SELECT * FROM users');
  }
<br>
  saveUser(user: User): void {
    this.database.insert('users', user);
  }
}
        </code>
    </pre><span class="toolbar">TypeScript</span></div><p>Dans cet exemple, la classe <code>UserService</code> ne respecte pas le principe d’injection de dépendance. Elle crée directement une instance de la classe <code>Database</code> à l’intérieur de son constructeur. On crée ici une dépendance étroite entre les deux classes, rendant difficile le remplacement ou la substitution de la classe <code>Database</code> par une autre implémentation. De plus, cela complique la mise en place des tests unitaires, car nous ne pouvons pas facilement simuler ou substituer la classe <code>Database</code>.</p><p>Voici tout simplement la version qui permet de résoudre ce problème :</p><div class="code-toolbar"><pre>
        <code class="language-typescript">
class UserService {
  private database: Database;
<br>
  constructor(database: Database) {
    this.database = database;
  }
<br>
  getUsers(): User[] {
    return this.database.query('SELECT * FROM users');
  }
<br>
  saveUser(user: User): void {
    this.database.insert('users', user);
  }
}
        </code>
    </pre><span class="toolbar">TypeScript</span></div><p>Dans cet exemple, nous avons mis en place l’injection par constructeur. La classe <code>UserService</code> reçoit une instance de <code>Database</code> lors de la création d’une nouvelle instance. Cela permet de fournir une implémentation spécifique de <code>Database</code> à la classe <code>UserService</code> lors de son instanciation. Cette pratique facilite également les tests unitaires en permettant de fournir une instance mock de <code>Database</code> lors des tests.</p><p>Notre exemple s’appuie sur un langage typé statiquement. Le type à injecter (Database) est très souvent une interface qui explicite le contrat attendu par la classe cliente (UserService).</p><p>Qu’en est-il pour un langage dynamiquement typé, pour lequel il n’est pas possible de définir une interface spécifique pour l’injection. Et bien dans ce cas, il est possible d’injecter n’importe quelle instance qui possède les mêmes méthodes que celles utilisées dans la classe cliente. Et c’est la responsabilité du développeur que le comportement soit correct.</p><p>Voici la version du code précédent en Ruby :</p><div class="code-toolbar"><pre>
        <code class="language-ruby">
class UserService
  def initialize(database)
    @database = database
  end
<br>
  def get_users
    @database.query('SELECT * FROM users')
  end
<br>
  def save_user(user)
    @database.insert('users', user)
  end
end
        </code>
    </pre><span class="toolbar">Ruby</span></div><h3 id="conclusion">Conclusion</h3><p>Ce principe favorise la flexibilité, la testabilité et la réutilisabilité du code en réduisant les dépendances directes entre les classes. Avec ce principe, une classe peut se concentrer sur sa responsabilité unique et n’a plus a créer les objets dont elle dépend. Il est la base l’inversion de contrôle, le concept qu’on retrouve dans toutes les architectures qui s’appuient sur le pattern Ports/Adapters.</p></div><aside class="post__aside"><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.d2velop.fr%2Fle-principe-dinjection-de-dependance%2F" class="js-share facebook" title="Partager avec Facebook" rel="nofollow noopener noreferrer" aria-label="Partager avec Facebook"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#facebook"/></svg> </a><a href="https://twitter.com/share?url=https%3A%2F%2Fblog.d2velop.fr%2Fle-principe-dinjection-de-dependance%2F&amp;via=eriatand&amp;text=Le%20principe%20d'injection%20de%20d%C3%A9pendance" class="js-share twitter" title="Partager avec Twitter" rel="nofollow noopener noreferrer" aria-label="Partager avec Twitter"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="https://pinterest.com/pin/create/button/?url=https%3A%2F%2Fblog.d2velop.fr%2Fle-principe-dinjection-de-dependance%2F&amp;media=https%3A%2F%2Fblog.d2velop.fr%2Fmedia%2Fposts%2F30%2Fdi.png&amp;description=Le%20principe%20d'injection%20de%20d%C3%A9pendance" class="js-share pinterest" title="Partager avec Pinterest" rel="nofollow noopener noreferrer" aria-label="Partager avec Pinterest"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#pinterest"/></svg> </a><a href="https://mix.com/add?url=https%3A%2F%2Fblog.d2velop.fr%2Fle-principe-dinjection-de-dependance%2F" class="js-share mix" title="Partager avec Mix" rel="nofollow noopener noreferrer" aria-label="Partager avec Mix"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#mix"/></svg> </a><a href="https://wa.me/?text=Le%20principe%20d'injection%20de%20d%C3%A9pendance https%3A%2F%2Fblog.d2velop.fr%2Fle-principe-dinjection-de-dependance%2F" class="js-share whatsapp" rel="nofollow noopener noreferrer" title="Partager avec WhatsApp" aria-label="Partager avec WhatsApp"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#whatsapp"/></svg> </a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fblog.d2velop.fr%2Fle-principe-dinjection-de-dependance%2F" class="js-share linkedin" title="Partager avec LinkedIn" rel="nofollow noopener noreferrer" aria-label="Partager avec LinkedIn"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#linkedin"/></svg> </a><a href="https://buffer.com/add?text=Le%20principe%20d'injection%20de%20d%C3%A9pendance&amp;url=https%3A%2F%2Fblog.d2velop.fr%2Fle-principe-dinjection-de-dependance%2F" class="js-share buffer" title="Partager avec Buffer" rel="nofollow noopener noreferrer" aria-label="Partager avec Buffer"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#buffer"/></svg></a></div></aside><footer class="post__footer"><div class="post__bio box"><img class="u-author__avatar" src="https://blog.d2velop.fr/media/website/cgerard_Manga_style_in_the_style_of_Akira_Toriyama_ultra_detail_d3941437-f0fa-45cb-85c5-ff0465bc27c4-removebg-preview-2.png" loading="lazy" alt="Cédric Gérard" height="500" width="500"><div><h4 class="h6"><a href="https://blog.d2velop.fr/authors/cedric-gerard/" title="Cédric Gérard">Cédric Gérard</a></h4><p>Je suis dans l'informatique depuis tout jeune. D'abord intéressé par le hardward (montage, overcloking), j'ai mis du temps à trouver ma voie. Je suis tombé dans le développement en 2007, je n'ai jamais arrêté depuis..<br><br>Aujourd'hui, je suis développeur web avec une plus grande appétence pour le backend. J’accorde beaucoup d’attention à la valeur apportée aux utilisateurs finaux. On ne réalise pas d'application que pour se faire plaisir, après tout.<br><br>Je mets aussi un point d'honneur à livrer du code de qualité en m'appuyant sur les bonnes pratiques du développement logiciel et je défends les valeurs du software craftmanship.<br><br>L'agilité est également un élément essentiel pour un travail fiable et efficace. Je ne parle pas de méthode, mais de l'état d'esprit prôné par l'agilité.<br><br>J'aime partager mes compétences et j'ai une appétence particulière pour l'encadrement des développeurs juniors.<br><br>Je suis également en quête de sens, aucune technologie étant une fin en elle-même, j'ai besoin de savoir pourquoi je travaille et qu'elle est la valeur produite.</p></div></div><nav class="post__nav box"><div class="post__nav__prev"><a href="https://blog.d2velop.fr/le-principe-de-segregation-des-interfaces/" class="post__nav__link" rel="prev"><img src="https://blog.d2velop.fr/media/posts/29/responsive/isp_title-xs.png" loading="lazy" alt="" height="596" width="942"><div class="u-small">Article Précédent<h5>Le principe de ségrégation des interfaces</h5></div></a></div></nav><div class="post__related box"><h3 class="box__title">Articles en relation</h3><div class="post__related-wrap"><figure class="post__related-item"><a href="https://blog.d2velop.fr/le-principe-de-segregation-des-interfaces/" class="c-card__image"><img src="https://blog.d2velop.fr/media/posts/29/responsive/isp_title-xs.png" loading="lazy" height="596" width="942" alt=""></a><figcaption><h4 class="post__related-title"><a href="https://blog.d2velop.fr/le-principe-de-segregation-des-interfaces/" class="inverse">Le principe de ségrégation des interfaces</a></h4><time datetime="2023-06-19T09:00" class="u-small">19 juin 2023</time></figcaption></figure><figure class="post__related-item"><a href="https://blog.d2velop.fr/le-principe-de-substitution-de-liskov/" class="c-card__image"><img src="https://blog.d2velop.fr/media/posts/28/responsive/liskov-xs.png" loading="lazy" height="596" width="1188" alt=""></a><figcaption><h4 class="post__related-title"><a href="https://blog.d2velop.fr/le-principe-de-substitution-de-liskov/" class="inverse">Le principe de substitution de Liskov</a></h4><time datetime="2023-06-06T09:00" class="u-small">6 juin 2023</time></figcaption></figure><figure class="post__related-item"><a href="https://blog.d2velop.fr/le-principe-ouvertferme/" class="c-card__image"><img src="https://blog.d2velop.fr/media/posts/27/responsive/title-xs.png" loading="lazy" height="558" width="788" alt=""></a><figcaption><h4 class="post__related-title"><a href="https://blog.d2velop.fr/le-principe-ouvertferme/" class="inverse">Le principe Ouvert/Fermé</a></h4><time datetime="2023-05-30T09:00" class="u-small">30 mai 2023</time></figcaption></figure></div></div></footer></article></main><div class="sidebar"><section class="box featured"><h3 class="box__title">A la une</h3><ul class="featured__container"><li class="featured__item"><a href="https://blog.d2velop.fr/le-principe-dinjection-de-dependance/" class="featured__image-link"><img src="https://blog.d2velop.fr/media/posts/30/responsive/di-xs.png" class="lazyload" loading="lazy" alt="" height="634" width="634"></a><div><a href="https://blog.d2velop.fr/le-principe-dinjection-de-dependance/" class="featured__title">Le principe d&#x27;injection de dépendance</a> <time class="u-small" datetime="2023-06-26T09:00">26 juin 2023</time></div></li><li class="featured__item"><a href="https://blog.d2velop.fr/le-principe-de-segregation-des-interfaces/" class="featured__image-link"><img src="https://blog.d2velop.fr/media/posts/29/responsive/isp_title-xs.png" class="lazyload" loading="lazy" alt="" height="596" width="596"></a><div><a href="https://blog.d2velop.fr/le-principe-de-segregation-des-interfaces/" class="featured__title">Le principe de ségrégation des interfaces</a> <time class="u-small" datetime="2023-06-19T09:00">19 juin 2023</time></div></li><li class="featured__item"><a href="https://blog.d2velop.fr/le-principe-de-substitution-de-liskov/" class="featured__image-link"><img src="https://blog.d2velop.fr/media/posts/28/responsive/liskov-xs.png" class="lazyload" loading="lazy" alt="" height="596" width="596"></a><div><a href="https://blog.d2velop.fr/le-principe-de-substitution-de-liskov/" class="featured__title">Le principe de substitution de Liskov</a> <time class="u-small" datetime="2023-06-06T09:00">6 juin 2023</time></div></li><li class="featured__item"><a href="https://blog.d2velop.fr/le-principe-ouvertferme/" class="featured__image-link"><img src="https://blog.d2velop.fr/media/posts/27/responsive/title-xs.png" class="lazyload" loading="lazy" alt="" height="558" width="558"></a><div><a href="https://blog.d2velop.fr/le-principe-ouvertferme/" class="featured__title">Le principe Ouvert/Fermé</a> <time class="u-small" datetime="2023-05-30T09:00">30 mai 2023</time></div></li><li class="featured__item"><a href="https://blog.d2velop.fr/le-principe-de-responsabilite-unique/" class="featured__image-link"><img src="https://blog.d2velop.fr/media/posts/26/responsive/srp_title-xs.png" class="lazyload" loading="lazy" alt="" height="596" width="596"></a><div><a href="https://blog.d2velop.fr/le-principe-de-responsabilite-unique/" class="featured__title">Le principe de responsabilité unique</a> <time class="u-small" datetime="2023-05-18T22:59">18 mai 2023</time></div></li></ul></section><section class="box"><h3 class="box__title">Suivez nous</h3><div class="follow"><a href="https://twitter.com/eriatand" class="twitter" aria-label="Twitter"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#twitter"/></svg> Twitter </a><a href="https://www.linkedin.com/company/d2velop" class="linkedin" aria-label="LinkedIn"><svg class="u-icon"><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#linkedin"/></svg> LinkedIn</a></div></section><section class="box authors"><h3 class="box__title">Auteurs</h3><ul class="authors__cotainer"><li class="authors__item"><a href="https://blog.d2velop.fr/authors/cedric-gerard/" class="authors__image-link"><img src="https://blog.d2velop.fr/media/website/cgerard_Manga_style_in_the_style_of_Akira_Toriyama_ultra_detail_d3941437-f0fa-45cb-85c5-ff0465bc27c4-removebg-preview-2.png" loading="lazy" alt="Cédric Gérard" height="500" width="500"></a><div><a href="https://blog.d2velop.fr/authors/cedric-gerard/" class="authors__title">Cédric Gérard</a> <span class="u-small">Article: 28</span></div></li></ul></section><section class="box"><h3 class="box__title">Tags</h3><ul class="tags"><li><a href="https://blog.d2velop.fr/tags/chroniques/">Chroniques</a> <span class="u-small">(12)</span></li><li><a href="https://blog.d2velop.fr/tags/code/">Code</a> <span class="u-small">(8)</span></li><li><a href="https://blog.d2velop.fr/tags/developpeur-mindset/">Développeur Mindset</a> <span class="u-small">(5)</span></li><li><a href="https://blog.d2velop.fr/tags/no-code/">No code</a> <span class="u-small">(1)</span></li><li><a href="https://blog.d2velop.fr/tags/recrutement/">Recrutement</a> <span class="u-small">(1)</span></li></ul></section></div><footer class="footer"><a class="footer__logo" href="https://blog.d2velop.fr/">d2velop</a><nav><ul class="footer__nav"></ul></nav><div class="footer__follow"><a href="https://twitter.com/eriatand" aria-label="Twitter"><svg><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="https://www.linkedin.com/company/d2velop" aria-label="LinkedIn"><svg><use xlink:href="https://blog.d2velop.fr/assets/svg/svg-map.svg#linkedin"/></svg></a></div><div class="footer__copyright"><p>Powered by Publii</p></div></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://blog.d2velop.fr/assets/js/scripts.min.js?v=ef33954c8f912e6c18ee116825aadc90"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>